<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Translating Words to Math & Basic Algebraic Thinking</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            margin: 20px;
            background-color: #fdfdff;
        }
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 20px;
        }
        .controls-container {
            text-align: center;
            padding: 10px;
            margin-bottom: 20px;
            background-color: #f0f0f0;
            border-radius: 5px;
        }
        .controls-container button {
            padding: 10px 20px;
            font-size: 1em;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px 10px;
        }
        #generateTestButton { background-color: #007bff; }
        #generateTestButton:hover { background-color: #0056b3; }
        #showSolutionsButton { background-color: #28a745; }
        #showSolutionsButton:hover { background-color: #218838; }
        #showSolutionsButton:disabled {
            background-color: #6c757d;
            cursor: not-allowed;
        }
        .problem-list { list-style-type: none; padding-left: 0; }
        .problem-list li {
            margin-bottom: 30px; padding: 15px;
            border: 1px solid #ddd; border-radius: 5px;
            background-color: #fff;
        }
        .problem-number { font-weight: bold; margin-right: 10px; font-size: 1.1em; }
        .problem-text-container {
            font-family: 'Georgia', serif; font-size: 1.1em;
            color: #444; display: block;
            margin-bottom: 10px; word-wrap: break-word;
        }
        .answer-space { display: block; margin-top: 10px; font-style: italic; color: #777; }
        .solution-steps {
            display: none; margin-top: 15px; padding: 15px;
            background-color: #e9f5ff; border: 1px dashed #5bc0de;
            border-radius: 4px; font-family: 'Arial', sans-serif;
            font-size: 1.0em; line-height: 1.5;
        }
        .solution-steps p { margin: 8px 0; word-wrap: break-word; }
        .solution-steps .final-answer {
            font-weight: bold; color: #007bff;
            margin-top:10px; padding-top:5px;
            border-top: 1px solid #ccc;
        }
        @media print {
            body { margin: 0.5in; }
            .controls-container { display: none; }
            h1 { font-size: 18pt; }
            .problem-list li { page-break-inside: avoid; }
            .solution-steps { background-color: #fff !important; border: 1px solid #ccc !important;}
        }
    </style>
</head>
<body>
    <h1>Translating Words to Math & Basic Algebraic Thinking</h1>
    <div class="controls-container">
        <button id="generateTestButton">Generate New Test</button>
        <button id="showSolutionsButton">Show Solutions</button>
    </div>
    <ol class="problem-list" id="problemListContainer"></ol>
    <script>
        const problemListContainer = document.getElementById('problemListContainer');
        const showSolutionsBtn = document.getElementById('showSolutionsButton');
        const generateTestBtn = document.getElementById('generateTestButton');
        let currentProblemsData = [];

        function getRandomInt(min, max) {
            min = Math.ceil(min); max = Math.floor(max);
            return Math.floor(Math.random() * (max - min + 1)) + min;
        }
        function getRandomName() {
            const names = ["Tom", "Bob", "Maria", "Alice", "John", "Sarah", "Mike", "Linda"];
            return names[getRandomInt(0, names.length - 1)];
        }

        function generateProblemsData() {
            const problems = [];
            let name1, name2, item1, item2;

            // --- Type 1: Consecutive Integers (Sum) ---
            let type1 = getRandomInt(0, 1) === 0 ? "even" : "odd";
            let start1_val = getRandomInt(10, 20);
            let int1_1 = start1_val * 2 + (type1 === "odd" ? 1 : 0);
            let int1_2 = int1_1 + 2;
            let int1_3 = int1_1 + 4;
            let sum1 = int1_1 + int1_2 + int1_3;
            problems.push({
                problemText: `The sum of three consecutive ${type1} integers is ${sum1}. What is the largest of these integers?`,
                solutionStepsHTML: `<p>Let integers be x, x+2, x+4. Then x + (x+2) + (x+4) = ${sum1} => 3x+6=${sum1} => 3x=${sum1-6} => x=${int1_1}.</p><p>Largest is x+4 = ${int1_1}+4 = ${int1_3}.</p><p class="final-answer">Final Answer: ${int1_3}.</p>`
            });

            // --- Type 2: Consecutive Integers (Sum of Extremes) ---
            let start2 = getRandomInt(15, 25);
            let mid2 = start2 + 1;
            let sum_sl2 = start2 + (start2 + 2);
            problems.push({
                problemText: `For three consecutive integers, the sum of the smallest and the largest is ${sum_sl2}. What is the middle integer?`,
                solutionStepsHTML: `<p>Let integers be n, n+1, n+2. Then n + (n+2) = ${sum_sl2} => 2n+2=${sum_sl2} => 2n=${sum_sl2-2} => n=${start2}.</p><p>Middle is n+1 = ${start2}+1 = ${mid2}.</p><p class="final-answer">Final Answer: ${mid2}.</p>`
            });

            // --- Type 3: Geometric (Rectangle Dimensions from Perimeter & Relationship) ---
            let W3 = getRandomInt(5, 10);
            let B3_mult = 2; let A3_less = getRandomInt(1, W3-1);
            let L3 = B3_mult * W3 - A3_less; if (L3 <= 0) L3 = W3+1; // Ensure L is positive
            let P3 = 2 * (L3 + W3);
            problems.push({
                problemText: `A rectangle's length is ${A3_less} cm less than twice its width. If its perimeter is ${P3} cm, find the dimensions.`,
                solutionStepsHTML: `<p>L=2W-${A3_less}, P=2(L+W)=${P3}. So 2((2W-${A3_less})+W)=${P3} => 2(3W-${A3_less})=${P3} => 6W-${2*A3_less}=${P3} => 6W=${P3+2*A3_less} => W=${W3}.</p><p>L=2(${W3})-${A3_less}=${L3}.</p><p class="final-answer">Final Answer: Width=${W3}cm, Length=${L3}cm.</p>`
            });

            // --- Type 4: Geometric (Rectangle Area from Perimeter & Relationship) ---
            let W4 = getRandomInt(4, 8);
            let A4_more = getRandomInt(2, 5);
            let L4 = W4 + A4_more;
            let P4 = 2 * (L4 + W4); let Area4 = L4 * W4;
            problems.push({
                problemText: `The length of a rectangle is ${A4_more} m more than its width. If the perimeter is ${P4} m, find the area.`,
                solutionStepsHTML: `<p>L=W+${A4_more}, P=2(L+W)=${P4}. So 2((W+${A4_more})+W)=${P4} => 2(2W+${A4_more})=${P4} => 4W+${2*A4_more}=${P4} => 4W=${P4-2*A4_more} => W=${W4}.</p><p>L=${W4}+${A4_more}=${L4}. Area=L*W=${L4}*${W4}=${Area4}m².</p><p class="final-answer">Final Answer: Area=${Area4}m².</p>`
            });

            // --- Type 5: Geometric (Square Side from Perimeter) ---
            let s5 = getRandomInt(6, 15); let P5 = 4 * s5;
            problems.push({
                problemText: `A square has a perimeter of ${P5} inches. What is the length of one side?`,
                solutionStepsHTML: `<p>P=4s. ${P5}=4s => s=${P5}/4=${s5}.</p><p class="final-answer">Final Answer: Side=${s5} inches.</p>`
            });

            // --- Type 6: Coin (Relationship & Value) ---
            name1 = getRandomName();
            let q6 = getRandomInt(5, 10); let D_offset6 = getRandomInt(2, 4); let d6 = q6 + D_offset6;
            let V6 = (0.25 * q6 + 0.10 * d6).toFixed(2);
            problems.push({
                problemText: `${name1} has q quarters and d dimes. She has ${D_offset6} more dimes than quarters, and the total value is $${V6}. Find q and d.`,
                solutionStepsHTML: `<p>d=q+${D_offset6}. 0.25q+0.10d=${V6}.</p><p>0.25q+0.10(q+${D_offset6})=${V6} => 0.35q+${(0.1*D_offset6).toFixed(2)}=${V6} => 0.35q=${(V6-0.1*D_offset6).toFixed(2)} => q=${q6}.</p><p>d=${q6}+${D_offset6}=${d6}.</p><p class="final-answer">Final Answer: ${q6} quarters, ${d6} dimes.</p>`
            });

            // --- Type 7: Coin (Total Count & Value) ---
            let n7 = getRandomInt(6, 12); let q7 = getRandomInt(4, 10);
            let total_coins7 = n7 + q7; let V7 = (0.05 * n7 + 0.25 * q7).toFixed(2);
            problems.push({
                problemText: `A collection of ${total_coins7} coins (nickels & quarters) has value $${V7}. How many quarters?`,
                solutionStepsHTML: `<p>n+q=${total_coins7} => n=${total_coins7}-q. 0.05n+0.25q=${V7}.</p><p>0.05(${total_coins7}-q)+0.25q=${V7} => ${(0.05*total_coins7).toFixed(2)}-0.05q+0.25q=${V7} => 0.20q=${(V7-0.05*total_coins7).toFixed(2)} => q=${q7}.</p><p class="final-answer">Final Answer: ${q7} quarters.</p>`
            });

            // --- Type 8: Systems (Sum & Difference) ---
            let x8 = getRandomInt(15, 30); let y8 = getRandomInt(5, x8 - 2);
            let S8 = x8 + y8; let D_val8 = x8 - y8;
            problems.push({
                problemText: `The sum of two numbers is ${S8}. Their difference is ${D_val8}. Find the numbers.`,
                solutionStepsHTML: `<p>x+y=${S8}, x-y=${D_val8}. Adding eq: 2x=${S8+D_val8}=${2*x8} => x=${x8}.</p><p>Then ${x8}+y=${S8} => y=${S8-x8}=${y8}.</p><p class="final-answer">Final Answer: ${x8}, ${y8}.</p>`
            });

            // --- Type 9: Systems (Sum & Ratio) ---
            let y9_small = getRandomInt(4, 10); let N9_mult = getRandomInt(2, 4);
            let x9_large = N9_mult * y9_small; let S9 = x9_large + y9_small;
            problems.push({
                problemText: `Sum of two numbers is ${S9}. One is ${N9_mult} times other. Find them.`,
                solutionStepsHTML: `<p>x=${N9_mult}y. x+y=${S9}. So ${N9_mult}y+y=${S9} => (${N9_mult+1})y=${S9} => y=${y9_small}.</p><p>x=${N9_mult}*${y9_small}=${x9_large}.</p><p class="final-answer">Final Answer: ${x9_large}, ${y9_small}.</p>`
            });

            // --- Type 10: Systems (Difference & Complex Relationship) ---
            let S10_small = getRandomInt(6, 10); let N10_mult = 2; let A10_more = getRandomInt(1, 5);
            let L10_large = N10_mult * S10_small + A10_more; let D_val10 = L10_large - S10_small;
            problems.push({
                problemText: `Difference is ${D_val10}. Larger is ${A10_more} more than twice smaller. Find them.`,
                solutionStepsHTML: `<p>L-S=${D_val10}, L=2S+${A10_more}. So (2S+${A10_more})-S=${D_val10} => S+${A10_more}=${D_val10} => S=${S10_small}.</p><p>L=2(${S10_small})+${A10_more}=${L10_large}.</p><p class="final-answer">Final Answer: ${L10_large}, ${S10_small}.</p>`
            });

            // --- Type 11: Working Backwards (Multi-step with division) ---
            let original11 = getRandomInt(8, 15); let A11_add = getRandomInt(2, 5); let B11_div = getRandomInt(2, 3);
            while ((2 * original11 + A11_add) % B11_div !== 0) { original11++; }
            let C11_res = (2 * original11 + A11_add) / B11_div;
            problems.push({
                problemText: `A number doubled, +${A11_add}, then /${B11_div}, yields ${C11_res}. Original?`,
                solutionStepsHTML: `<p>((2x+${A11_add})/${B11_div})=${C11_res} => 2x+${A11_add}=${C11_res*B11_div} => 2x=${C11_res*B11_div-A11_add} => x=${original11}.</p><p class="final-answer">Final Answer: ${original11}.</p>`
            });

            // --- Type 12: Working Backwards (Multi-step with multiplication) ---
            let A12_sub = getRandomInt(2, 6); let original12 = getRandomInt(A12_sub + 1, 12);
            let B12_mult = getRandomInt(2, 4); let C12_res = (original12 - A12_sub) * B12_mult;
            problems.push({
                problemText: `Number -${A12_sub}, then *${B12_mult}, yields ${C12_res}. Original?`,
                solutionStepsHTML: `<p>(x-${A12_sub})*${B12_mult}=${C12_res} => x-${A12_sub}=${C12_res/B12_mult} => x=${C12_res/B12_mult+A12_sub}=${original12}.</p><p class="final-answer">Final Answer: ${original12}.</p>`
            });

            // --- Type 13: Age (Offset & Sum) ---
            name1 = getRandomName(); name2 = getRandomName(); while(name1===name2)name2=getRandomName();
            let p2_age13 = getRandomInt(6, 12); let A_offset13 = getRandomInt(3, 7);
            let p1_age13 = p2_age13 + A_offset13; let S_age13 = p1_age13 + p2_age13;
            problems.push({
                problemText: `${name1} is ${A_offset13} yrs older than ${name2}. Sum of ages ${S_age13}. ${name2}'s age?`,
                solutionStepsHTML: `<p>A=B+${A_offset13}, A+B=${S_age13}. So (B+${A_offset13})+B=${S_age13} => 2B+${A_offset13}=${S_age13} => 2B=${S_age13-A_offset13} => B=${p2_age13}.</p><p class="final-answer">Final Answer: ${name2} is ${p2_age13}.</p>`
            });

            // --- Type 14: Age (Ratio & Difference) ---
            let d_age14 = getRandomInt(5, 10); let N_mult_m14 = getRandomInt(3, 4);
            let m_age14 = N_mult_m14 * d_age14; let diff_age14 = m_age14 - d_age14;
            problems.push({
                problemText: `Mother is ${N_mult_m14} times daughter. Age difference ${diff_age14} yrs. Daughter's age?`,
                solutionStepsHTML: `<p>M=${N_mult_m14}D, M-D=${diff_age14}. So ${N_mult_m14}D-D=${diff_age14} => (${N_mult_m14-1})D=${diff_age14} => D=${d_age14}.</p><p class="final-answer">Final Answer: Daughter is ${d_age14}.</p>`
            });

            // --- Type 15: Geometric (Triangle Area Expression - specific) ---
            let B15_more = getRandomInt(2, 5);
            problems.push({
                problemText: `The base of a triangle is ${B15_more} cm more than its height 'h'. Write an expression for its area.`,
                solutionStepsHTML: `<p>Height=h. Base=h+${B15_more}.</p><p>Area A = (1/2) * base * height = (1/2) * (h+${B15_more}) * h.</p><p class="final-answer">Final Answer: A = (1/2)h(h+${B15_more}).</p>`
            });

            // --- Type 16: Symbolic Representation of Changes / Processes (NEW CONCEPTUAL) ---
            let perc_inc16 = getRandomInt(10, 30); // e.g., 20%
            let perc_dec16 = getRandomInt(5, 15);  // e.g., 10%
            let final_multiplier = ( (1 + perc_inc16/100) * (1 - perc_dec16/100) ).toFixed(3);
            problems.push({
                problemText: `A quantity Q is first increased by ${perc_inc16}%. Then, the new amount is decreased by ${perc_dec16}%. Write a single algebraic expression in terms of Q that represents the final quantity.`,
                solutionStepsHTML: `
                    <p>1. Increase by ${perc_inc16}%: Q_new1 = Q * (1 + ${perc_inc16}/100) = Q * ${(1 + perc_inc16/100).toFixed(2)}.</p>
                    <p>2. Decrease new amount by ${perc_dec16}%: Q_final = Q_new1 * (1 - ${perc_dec16}/100) = Q_new1 * ${(1 - perc_dec16/100).toFixed(2)}.</p>
                    <p>Combining: Q_final = (Q * ${(1 + perc_inc16/100).toFixed(2)}) * ${(1 - perc_dec16/100).toFixed(2)}.</p>
                    <p class="final-answer">Final Answer: ${final_multiplier}Q (or Q * ${(1 + perc_inc16/100).toFixed(2)} * ${(1 - perc_dec16/100).toFixed(2)}).</p>`
            });

            // --- Type 17: Abstract Ratio/Proportion Setup (NEW CONCEPTUAL) ---
            let item_add17 = getRandomInt(2,5); let item_rem17 = getRandomInt(1,4);
            problems.push({
                problemText: `A mixture contains 'A' liters of acid and 'W' liters of water. If ${item_add17} liters of acid are added and ${item_rem17} liters of water are removed, write an expression for the new ratio of acid to the total mixture volume.`,
                solutionStepsHTML: `
                    <p>Original acid = A, Original water = W.</p>
                    <p>New acid = A + ${item_add17}.</p>
                    <p>New water = W - ${item_rem17}.</p>
                    <p>New total volume = (New acid) + (New water) = (A + ${item_add17}) + (W - ${item_rem17}) = A + W + ${item_add17 - item_rem17}.</p>
                    <p>New ratio of acid to total volume = (New acid) / (New total volume).</p>
                    <p class="final-answer">Final Answer: (A + ${item_add17}) / (A + W + ${item_add17 - item_rem17}).</p>`
            });

            // --- Type 18: Interpreting Algebraic Expressions in Context (NEW CONCEPTUAL) ---
            let base_cost18 = getRandomInt(15, 30); let per_item_cost18 = (getRandomInt(5, 20)/100).toFixed(2); // e.g. 0.05, 0.10
            let item_name18 = "text messages"; let var_name18 = "t";
            problems.push({
                problemText: `The monthly cost 'C' (in dollars) for a mobile plan is C = ${base_cost18} + ${per_item_cost18}${var_name18}, where '${var_name18}' is the number of ${item_name18} sent.
                <br>a) What does the '${base_cost18}' represent?
                <br>b) What does the '${per_item_cost18}${var_name18}' represent?
                <br>c) What is the cost if no ${item_name18} are sent?`,
                solutionStepsHTML: `
                    <p>a) The '${base_cost18}' represents the fixed base monthly fee for the plan, even if no ${item_name18} are sent.</p>
                    <p>b) The '${per_item_cost18}${var_name18}' represents the total additional cost for sending '${var_name18}' ${item_name18}, where each message costs $${per_item_cost18}.</p>
                    <p>c) If no ${item_name18} are sent, ${var_name18}=0. So, C = ${base_cost18} + ${per_item_cost18}(0) = ${base_cost18}. The cost is $${base_cost18}.</p>
                    <p class="final-answer">Final Answer: a) Base fee, b) Cost of messages, c) $${base_cost18}.</p>`
            });

            // --- Type 19: Geometric Relationships with Variables (NEW CONCEPTUAL) ---
            let L_inc19 = getRandomInt(2,5); let W_dec19 = getRandomInt(1,3);
            problems.push({
                problemText: `A rectangle has length 'L' and width 'W'.
                <br>a) If its length is increased by ${L_inc19} units and its width is decreased by ${W_dec19} unit(s), write an expression for its new perimeter.
                <br>b) Write an expression for its new area.`,
                solutionStepsHTML: `
                    <p>Original: Length=L, Width=W.</p>
                    <p>New dimensions: New Length = L + ${L_inc19}, New Width = W - ${W_dec19}.</p>
                    <p>a) New Perimeter = 2 * (New Length + New Width) = 2 * ((L + ${L_inc19}) + (W - ${W_dec19})) = 2 * (L + W + ${L_inc19 - W_dec19}).</p>
                    <p>   Simplified: 2L + 2W + ${2 * (L_inc19 - W_dec19)}.</p>
                    <p>b) New Area = (New Length) * (New Width) = (L + ${L_inc19}) * (W - ${W_dec19}).</p>
                    <p>   Expanded: LW - ${W_dec19}L + ${L_inc19}W - ${L_inc19 * W_dec19}.</p>
                    <p class="final-answer">Final Answer: a) 2(L + W + ${L_inc19 - W_dec19}), b) (L + ${L_inc19})(W - ${W_dec19}).</p>`
            });

            // --- Type 20: Number Properties and General Representations (NEW CONCEPTUAL) ---
            problems.push({
                problemText: `The sum of two integers is an even number.
                <br>a) What can you say about the individual integers (their parity - odd/even)?
                <br>b) If one integer is represented as '2k' (where 'k' is an integer), how could you represent the other integer generally?`,
                solutionStepsHTML: `
                    <p>a) For the sum of two integers to be even, both integers must have the same parity. This means either:
                    <br>   - Both integers are even (e.g., 2+4=6).
                    <br>   - Both integers are odd (e.g., 3+5=8).</p>
                    <p>b) If one integer is '2k' (even), the other integer must also be even to make their sum even. So, the other integer can be represented as '2m', where 'm' is any integer.</p>
                    <p>(If the first integer was odd, e.g., 2k+1, the other would also have to be odd, e.g., 2m+1).</p>
                    <p class="final-answer">Final Answer: a) Both even OR both odd. b) 2m (where m is an integer).</p>`
            });

            // --- Type 21: "What if" Scenarios Based on Existing Structures (NEW CONCEPTUAL) ---
            let R_rate21 = getRandomInt(2,5); // e.g. 3% interest rate
            problems.push({
                problemText: `Simple interest 'I' is calculated as I = P * R * T, where P is principal, R is rate (as a decimal), and T is time.
                If the Principal (P) and Time (T) are kept constant, but the interest Rate (R) is doubled, what happens to the amount of Simple Interest (I) earned? Explain.`,
                solutionStepsHTML: `
                    <p>Original Interest: I_orig = P * R_orig * T.</p>
                    <p>New Rate: R_new = 2 * R_orig.</p>
                    <p>New Interest: I_new = P * R_new * T = P * (2 * R_orig) * T.</p>
                    <p>Rearranging: I_new = 2 * (P * R_orig * T).</p>
                    <p>Since I_orig = P * R_orig * T, we can substitute: I_new = 2 * I_orig.</p>
                    <p>Explanation: Because the interest 'I' is directly proportional to the rate 'R' (when P and T are constant), doubling the rate 'R' will directly result in doubling the amount of simple interest 'I' earned.</p>
                    <p class="final-answer">Final Answer: The Simple Interest (I) earned will also double.</p>`
            });

            return problems;
        }

        function displayProblems() {
            currentProblemsData = generateProblemsData();
            problemListContainer.innerHTML = '';
            showSolutionsBtn.textContent = 'Show Solutions';
            showSolutionsBtn.disabled = false;

            currentProblemsData.forEach((data, index) => {
                const listItem = document.createElement('li');
                listItem.innerHTML = `
                    <span class="problem-number">${index + 1}.</span>
                    <div class="problem-text-container">${data.problemText}</div>
                    <span class="answer-space">Answer: ____________</span>
                    <div class="solution-steps" id="solution-${index + 1}">${data.solutionStepsHTML}</div>`;
                problemListContainer.appendChild(listItem);
            });
            document.querySelectorAll('.solution-steps').forEach(sol => sol.style.display = 'none');
            document.querySelectorAll('.problem-list > li').forEach(item => item.classList.remove('solutions-shown'));
        }

        function showSolutions() {
            const solutions = document.querySelectorAll('.solution-steps');
            if (solutions.length === 0) return;
            solutions.forEach(sol => sol.style.display = 'block');
            document.querySelectorAll('.problem-list > li').forEach(item => item.classList.add('solutions-shown'));
            showSolutionsBtn.textContent = 'Solutions Shown';
            showSolutionsBtn.disabled = true;
        }

        showSolutionsBtn.addEventListener('click', showSolutions);
        generateTestBtn.addEventListener('click', displayProblems);
        displayProblems(); // Initial load
    </script>
</body>
</html>